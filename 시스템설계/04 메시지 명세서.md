# **온라인 시험시스템 메시지 명세서**

**버전: 1.2.0** (최종 작성일: 2024-12-26)

---

## 문서 개요

본 문서는 **온라인 시험시스템**에서 사용되는 **메시지**(Request/Response)를, **메시지명** 및 **URL**(웹서비스 사용 시) 구조를 함께 정의합니다.  
웹서비스(HTTP/REST) 사용 시, **URL 구조**는 **메시지 이름**을 참고하여 **`/<기능>/<행위>/<req|res>`** 형태로 작성합니다.

---

## 1. MSG_PLAN_PROCTOR_PAGERS_REQ

1. **메시지 명**
    - `MSG_PLAN_PROCTOR_PAGERS_REQ`
2. **메시지 개요**
    - **용도**: 감독관이 시험정보(목록)를 조회 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/plan/proctor/pagers/req`
3. **메시지 구조** (필드)
   | 필드명 | 타입 | 설명 |
   |-----------|--------|-------------------|
   | examoprSeq| String | 시험시행코드 |
   | rtmcode | String | RTMCODE |
   | runType | String | (옵션) 구동타입 |
4. **예시 (JSON)**

```json
{
    "name": "MSG_PLAN_PROCTOR_PAGERS_REQ",
    "from": "감독관",
    "to": "시스템",
    "broadcast": false,
    "payload": {
        "examoprSeq": "E12345",
        "rtmcode": "RTM999",
        "runType": "WEB"
    }
}
```

---

## 1-2. MSG_PLAN_PROCTOR_PAGERS_RES

1. **메시지 명**
    - `MSG_PLAN_PROCTOR_PAGERS_RES`
2. **메시지 개요**
    - **용도**: 시험정보 목록 조회 결과 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/plan/proctor/pagers/res`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |---------|--------|-----------------------|
   | result | String | 호출결과(`sucess`등) |
   | message | String | 메시지(실패사유) |
   | list | List | 시험정보 목록 |
4. **예시 (JSON)**

```json
{
  "name": "MSG_PLAN_PROCTOR_PAGERS_RES",
  "from": "시스템",
  "to": "감독관",
  "broadcast": false,
  "payload": {
    "result": "sucess",
    "message": "",
    "list": [
      {
        "testcode": "TEST001",
        "testgubun": "",
        "testkind": "",
        ...
      }
    ]
  }
}
```

---

## 2. MSG_EXAMINEE_INFO_REQ

1. **메시지 명**
    - `MSG_EXAMINEE_INFO_REQ`
2. **메시지 개요**
    - **용도**: 응시자 정보 조회 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/examinee/info/req`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |--------|--------|------------|
   | query | String | SELECT 쿼리|
4. **예시**

```json
{
    "name": "MSG_EXAMINEE_INFO_REQ",
    "from": "감독관",
    "to": "시스템",
    "payload": {
        "query": "SELECT CU.USERID ... FROM TBL_RTM_USER ..."
    }
}
```

---

## 2-2. MSG_EXAMINEE_INFO_RES

1. **메시지 명**
    - `MSG_EXAMINEE_INFO_RES`
2. **메시지 개요**
    - **용도**: 응시자 정보 조회 결과 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/examinee/info/res`
3. **메시지 구조**  
   (userid, userid2, username, etc.)
4. **예시**

```json
{
  "name": "MSG_EXAMINEE_INFO_RES",
  "payload": [
    {
      "userid": "EXAM001",
      "username": "홍길동",
      ...
    }
  ]
}
```

---

## 3. MSG_SUPERVISOR_INFO_SAVE_REQ

1. **메시지 명**
    - `MSG_SUPERVISOR_INFO_SAVE_REQ`
2. **메시지 개요**
    - **용도**: 감독관 정보 저장 (MERGE 쿼리) (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/supervisor/info/save/req`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |--------|--------|-------------|
   | query | String | MERGE 쿼리 |
4. **예시**

```json
{
    "name": "MSG_SUPERVISOR_INFO_SAVE_REQ",
    "payload": {
        "query": "MERGE INTO TBL_RTM ..."
    }
}
```

---

## 3-2. MSG_SUPERVISOR_INFO_SAVE_RES

1. **메시지 명**
    - `MSG_SUPERVISOR_INFO_SAVE_RES`
2. **메시지 개요**
    - **용도**: 감독관 정보 저장 응답 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/supervisor/info/save/res`
3. **메시지 구조**  
   | 필드명| 타입 | 설명 |
   |-------|--------|--------------|
   | result| String | 성공여부 등 |
4. **예시**

```json
{
    "name": "MSG_SUPERVISOR_INFO_SAVE_RES",
    "payload": {
        "result": "IOSYS_SUCCESS"
    }
}
```

---

## 4. MSG_TIME_EXTENSION_REQ

1. **메시지 명**
    - `MSG_TIME_EXTENSION_REQ`
2. **메시지 개요**
    - **용도**: 시험 시간 연장 요청 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/time/extension/req`
3. **메시지 구조**  
   (examoprSeq, rtmcode, runType, extendedtime, userList, ...)
4. **예시**

```json
{
  "name": "MSG_TIME_EXTENSION_REQ",
  "payload": {
    "examoprSeq": "EXAM2024",
    "extendedtime": 10,
    ...
  }
}
```

---

## 4-2. MSG_TIME_EXTENSION_RES

1. **메시지 명**
    - `MSG_TIME_EXTENSION_RES`
2. **메시지 개요**
    - **용도**: 시험 시간 연장 결과 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/time/extension/res`
3. **메시지 구조**  
   | 필드명| 타입 | 설명 |
   |-------|--------|------------|
   | result| String | `sucess`등 |
4. **예시**

```json
{
    "name": "MSG_TIME_EXTENSION_RES",
    "payload": {
        "result": "sucess"
    }
}
```

---

## 5. MSG_CAPTURE_INFO_REQ

1. **메시지 명**
    - `MSG_CAPTURE_INFO_REQ`
2. **메시지 개요**
    - **용도**: 1차/2차 카메라/화면캡쳐 정보 요청 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/capture/info/req`
3. **메시지 구조**  
   (examoprSeq, type, users, ...)
4. **예시**

```json
{
    "name": "MSG_CAPTURE_INFO_REQ",
    "payload": {
        "examoprSeq": "E123",
        "type": "SCREEN",
        "users": [{ "userid": "EXAM001" }]
    }
}
```

---

## 5-2. MSG_CAPTURE_INFO_RES

1. **메시지 명**
    - `MSG_CAPTURE_INFO_RES`
2. **메시지 개요**
    - **용도**: 카메라/화면캡쳐 정보 응답 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/capture/info/res`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |---------|--------|--------|
   | result | String | 결과 |
   | message | String | 실패사유|
   | list | List | 이미지 목록 |

---

## 6. MSG_FACE_DETECT_REQ

1. **메시지 명**
    - `MSG_FACE_DETECT_REQ`
2. **메시지 개요**
    - **용도**: 얼굴인식 결과 요청 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/face/detect/req`
3. **메시지 구조**  
   (examoprSeq, group1, group2, group3, ...)
4. **예시**

```json
{
  "name": "MSG_FACE_DETECT_REQ",
  "payload": {
    "examoprSeq": "E2024",
    ...
  }
}
```

---

## 6-2. MSG_FACE_DETECT_RES

1. **메시지 명**
    - `MSG_FACE_DETECT_RES`
2. **메시지 개요**
    - **용도**: 얼굴인식 결과 응답 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/face/detect/res`
3. **메시지 구조**  
   (result, message, data[])
4. **예시**

```json
{
    "name": "MSG_FACE_DETECT_RES",
    "payload": {
        "result": "sucess",
        "data": [{ "userid": "EXAM001", "pYellow": "0" }]
    }
}
```

---

## 7. MSG_ANSWER_UPLOAD_REQ

1. **메시지 명**
    - `MSG_ANSWER_UPLOAD_REQ`
2. **메시지 개요**
    - **용도**: 답안지 upload 요청
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/answer/upload/req`
3. **메시지 구조**  
   (examoprSeq, rtmcode, userid, json, ...)
4. **예시**

```json
{
  "name": "MSG_ANSWER_UPLOAD_REQ",
  "payload": {
    "examoprSeq": "E98765",
    "userid": "EXAM001",
    ...
  }
}
```

---

## 7-2. MSG_ANSWER_UPLOAD_RES

1. **메시지 명**
    - `MSG_ANSWER_UPLOAD_RES`
2. **메시지 개요**
    - **용도**: 답안 업로드 응답 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/answer/upload/res`
3. **메시지 구조**  
   | 필드명| 타입 | 설명 |
   |-------|--------|---------|
   | result| String | 성공여부 |

4. **예시**

```json
{
    "name": "MSG_ANSWER_UPLOAD_RES",
    "payload": {
        "result": "IOSYS_SUCCESS"
    }
}
```

---

## 8. MSG_EXAM_END_CHECK_REQ

1. **메시지 명**
    - `MSG_EXAM_END_CHECK_REQ`
2. **메시지 개요**
    - **용도**: 시험 종료 여부 체크 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/exam/end/check/req`
3. **메시지 구조**  
   (query)
4. **예시**

```json
{
    "name": "MSG_EXAM_END_CHECK_REQ",
    "payload": {
        "query": "SELECT RTMCTRLYN FROM TBL_EXAMOPR ..."
    }
}
```

---

## 8-2. MSG_EXAM_END_CHECK_RES

1. **메시지 명**
    - `MSG_EXAM_END_CHECK_RES`
2. **메시지 개요**
    - **용도**: 시험 종료 여부 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/exam/end/check/res`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |--------------|-------|--------------|
   | serviceEnabled|String| Y/N 여부 |

4. **예시**

```json
{
    "name": "MSG_EXAM_END_CHECK_RES",
    "payload": {
        "serviceEnabled": "N"
    }
}
```

---

## 9. MSG_CAMERA_IMAGE_REQ

1. **메시지 명**
    - `MSG_CAMERA_IMAGE_REQ`
2. **메시지 개요**
    - **용도**: 응시자 1차/2차 카메라 사진 요청 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/camera/image/req`
3. **메시지 구조**  
   (examoprSeq, userid, kinds=PC,MOBILE)
4. **예시**

```json
{
    "name": "MSG_CAMERA_IMAGE_REQ",
    "payload": {
        "examoprSeq": "EXAM123",
        "userid": "EXAM001",
        "kinds": "PC,MOBILE"
    }
}
```

---

## 9-2. MSG_CAMERA_IMAGE_RES

1. **메시지 명**
    - `MSG_CAMERA_IMAGE_RES`
2. **메시지 개요**
    - **용도**: 카메라 이미지 목록 반환 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/camera/image/res`
3. **메시지 구조**  
   (result, camList, cubCamList)
4. **예시**

```json
{
    "name": "MSG_CAMERA_IMAGE_RES",
    "payload": {
        "result": "sucess",
        "camList": [{ "img": "/pc_cam/EXAM001.png" }],
        "cubCamList": [{ "img": "/mobile_cam/EXAM001.png" }]
    }
}
```

---

## 10. MSG_EXAMINEE_PHOTO_REQ

1. **메시지 명**
    - `MSG_EXAMINEE_PHOTO_REQ`
2. **메시지 개요**
    - **용도**: 응시자 등록 사진 정보 (Request)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/examinee/photo/req`
3. **메시지 구조**  
   (query)
4. **예시**

```json
{
    "name": "MSG_EXAMINEE_PHOTO_REQ",
    "payload": {
        "query": "SELECT PHTBODY FROM TBL_EXAMOPR_APLY WHERE ..."
    }
}
```

---

## 10-2. MSG_EXAMINEE_PHOTO_RES

1. **메시지 명**
    - `MSG_EXAMINEE_PHOTO_RES`
2. **메시지 개요**
    - **용도**: 응시자 등록 사진 결과 (Response)
    - **채널**: **웹서비스(HTTP/REST)**
    - **URL**: `/examinee/photo/res`
3. **메시지 구조**  
   | 필드명 | 타입 | 설명 |
   |----------|--------|---------------------------|
   | serverPath|String | 사진 이미지 serverPath |

4. **예시**

```json
{
    "name": "MSG_EXAMINEE_PHOTO_RES",
    "payload": {
        "serverPath": "/img/profile/EXAM001.png"
    }
}
```

---

## 결론

-   모든 메시지는 **웹서비스(HTTP/REST)** 사용으로, **URL명**은 메시지명 구조를 참조하여 **`/<기능>/<행위>/<req|res>`** 형태로 정했습니다.
-   소켓(WebSocket 등) 방식을 사용할 경우, **메시지 개요**에 “소켓 채널 사용”이라고 명시하고, **URL**은 생략하거나 다르게 표기할 수 있습니다.
-   각 메시지에는 **(메시지명, 개요, 구조, 예시)**를 통일된 형식으로 정리해, 온라인 시험시스템 구현에 참고할 수 있도록 합니다.

(버전: 1.2.0)
