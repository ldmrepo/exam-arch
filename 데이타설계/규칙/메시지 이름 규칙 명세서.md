### **메시지 이름 규칙 명세서**

이 명세서는 시스템 내 메시지 이름을 정의하고, 일관성 및 확장성을 보장하기 위한 규칙을 설명합니다.

---

## **1. 메시지 이름 규칙**

### **1.1 이름 구성**

메시지 이름은 **`<주체>-<동작>`** 또는 **`<카테고리>-<세부사항>`** 형식을 따릅니다.

-   **`<주체>`**: 메시지를 발생시키는 주체.
    -   `client`: 클라이언트에서 발생.
    -   `server`: 서버에서 발생.
-   **`<동작>`**: 메시지가 수행하는 주요 행동.
    -   예: `answer-change`, `question-visit`.
-   **`<카테고리>`**: 메시지의 카테고리를 정의.
    -   예: `exam`, `question`, `cheating`.
-   **`<세부사항>`**: 메시지의 상세한 행동이나 유형.
    -   예: `status`, `alert`, `end`.

---

### **1.2 작성 규칙**

1. **소문자만 사용**:

    - 메시지 이름은 모두 소문자로 작성합니다.
    - 예: `client-answer-change` (O), `Client-Answer-Change` (X).

2. **하이픈(`-`) 사용**:

    - 단어는 하이픈(`-`)으로 구분합니다.
    - 예: `server-exam-end`.

3. **명확성**:

    - 메시지 이름은 메시지의 목적과 행동을 명확히 나타내야 합니다.
    - 예: `client-question-visit` → 문항 방문 이벤트.

4. **일관성**:

    - 동일한 유형의 메시지는 동일한 패턴을 따릅니다.
    - 예: `client-answer-change`, `client-question-visit`.

5. **확장성**:
    - 새 메시지를 추가할 때 기존 메시지와 충돌하지 않도록 고유한 이름을 사용합니다.

---

## **2. 메시지 이름 구성 예시**

### **2.1 클라이언트에서 발생하는 메시지**

| 메시지 이름             | 설명                                   |
| ----------------------- | -------------------------------------- |
| `client-answer-change`  | 수험자가 답안을 변경했을 때 전송.      |
| `client-question-visit` | 수험자가 특정 문항에 방문했을 때 전송. |
| `client-answer-submit`  | 수험자가 답안을 제출했을 때 전송.      |

### **2.2 서버에서 발생하는 메시지**

| 메시지 이름              | 설명                            |
| ------------------------ | ------------------------------- |
| `server-exam-status`     | 시험 상태를 클라이언트로 전송.  |
| `server-question-status` | 문항 상태를 클라이언트로 전송.  |
| `server-exam-end`        | 시험 종료를 알리는 메시지 전송. |

### **2.3 알림 메시지**

| 메시지 이름             | 설명                                 |
| ----------------------- | ------------------------------------ |
| `server-cheating-alert` | 부정행위 경고 메시지 전송.           |
| `server-time-warning`   | 남은 시간이 얼마 남지 않았음을 알림. |

---

## **3. 적용 사례**

### **3.1 메시지 흐름**

#### **클라이언트 → 서버**

1. **문항 방문**:
    ```json
    {
        "type": "client-question-visit",
        "payload": {
            "examId": "exam123",
            "userId": "user456",
            "questionId": "q1"
        }
    }
    ```
2. **답안 변경**:
    ```json
    {
        "type": "client-answer-change",
        "payload": {
            "examId": "exam123",
            "userId": "user456",
            "questionId": "q1",
            "answer": "C"
        }
    }
    ```

#### **서버 → 클라이언트**

1. **시험 상태**:

    ```json
    {
        "type": "server-exam-status",
        "payload": {
            "examId": "exam123",
            "status": "inProgress",
            "remainingTime": 1200
        }
    }
    ```

2. **부정행위 경고**:
    ```json
    {
        "type": "server-cheating-alert",
        "payload": {
            "examId": "exam123",
            "userId": "user456",
            "alertType": "screenSwitch",
            "message": "You switched screens multiple times."
        }
    }
    ```

---

## **4. 메시지 이름 설계 지침**

1. **이름의 직관성**:
    - 메시지 이름만 보고 메시지의 목적과 동작을 쉽게 이해할 수 있어야 합니다.
2. **모듈화된 설계**:
    - 메시지를 카테고리와 세부사항으로 나누어 추가 메시지 설계 시 충돌을 방지합니다.
3. **중복 방지**:
    - 이미 정의된 메시지와 중복되지 않도록 유니크한 이름을 사용합니다.
4. **버전 관리**:
    - 필요할 경우 메시지 이름에 버전을 추가하여 변경 가능성을 반영.
    - 예: `server-exam-status-v1`.

---
