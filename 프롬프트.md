소켓서버 분산환경 시나리오.

조건 : 분산 환경에서 로드밸런싱으로 소켓서버A, 소켓서버B 소캣서버를 2개 운영
감독관A는 수험자A1,수험자A2를 감독한다.
감독관B는 수험자B1,수험자B2를 감독한다.

상태 :
상태관리기는 큐서버의 SQ(상태관리큐)를 구독한다.

1. 소켓서버A는 큐서버의 QA 큐를 구독한다.
2. 소켓서버A는 큐서버의 QB 큐를 구독한다.
3. 수험자A1는 소켓서버A로 접속한다.
4. 수험자A2는 소켓버서B로 접속한다.
5. 수험자B1는 소켓서버B로 접속한다.
6. 수험자B2는 소켓버서B로 접속한다.
7. 감독관A는 소켓서버B로 접속한다.
8. 감독관B는 소켓서버B로 접속한다.

시나리오 A

1. 감독관A가 시험시작상태를 소켓서버B로 전송한다.
2. 소켓서버B는 QA,QB로 메시지를 발행한다.
3. SQ를 구독하는 상태관리기는 감독관의 상태를 업데이트 한다.
4. 상태관리기는 QA,QB롤 시작상태를 발행한다.
5. QA를 구독하는 소켓버서A는 메시지를 수험자A1으로 전송한다.
6. QB를 구독하는 소켓서버B는 메시지를 수험자A2,감독관A로 전송한다.
7. 수험자A2는 메시지를 수신하고 진행한다.
8. 감독관A는 메시지를 수신하고 진행한다.
9. 수험자A1는 메시지를 수신하고, 시험시작 상태를 소켓서버A로 전송한다.
10. 소켓서버A는 받은 메시지를 SQ에 발행한다.
11. 상태관리기는 수험자상태를 업데이트한다.
12. 상태관리기는 수험자상태를 QA,QB에 발행한다.
13. 소켓서버A는 QA에서 받은 메시지를 수험자A1에게 전송한다.
14. 소켓서버B는 QB에서 받은 메시지를 감독관A에게 전송한다.
15. 수험자A1는 메시지를 수신한고 진행한다.
16. 감독관A는 메지지를 수신하고 수험자상태를 업데이트한다.
17. 수험자A2도 동일하게 흐름을 따른다.

위의 시나리오를 정리하고 , 시퀀스 다이어그램을 작성해주세요.

2. 로그인 한다.
3. 시험목록에서 시험을 선택한다.
4. 시험응시 웹페이지가 실행된다.
5. 시험정보를 웹서버에 요청한다.
6. 웹서버는 REDIS에서 계획정보, 수험자 정보를 조회한다.
7. 웹서버는 계획정보,수험자 정보를 브라우저에 전송한다.
8. 브라우저는 계획정보, 수험자 정보를 확인한다.
9. 브라우저는 소켓서버에 연결한다.
10. 소켓서버는 연결을 수락한다.
11. 브라우저는 연결 수락메시지를 수신한다.
12. 브라우저는 소켓서버에 시험접속을 요청한다.
13. 소켓서버는 시험접속요청을 수신하여 큐서버의 상태관리 큐로 발행한다.
14. 상태관리큐를 구독하고 있는 상태관리자는 수험자의 상태 정보를 확인하고 유효한 사용자 인경우 소켓정보와 상태를 업데이트한다.
15. 상태관리자는 소켓서버큐에 사용자 상태를 발행한다.
16. 상태관리큐를 구독하고 있는 소켓서버는 메시지를 해당하는 브라우저(수험자), 감독관에게 전송한다.
17. 브라우저는 소켓서버로 부터 메시지를 받아, 시험접속요청이 실패하면 종료한다.
18. 시험접속요청이 성공하면 계속진행한다.

주어진 시나리오를 정리하고, 시퀀스 다이어그램 작성해주세요

---

문항풀이 데이타 및 메타데이타 수집 및 처리 시나리오

시스템은 브라우저, 소켓서버, 큐서버 , 레디스 서버, 데이타베이스 서버, 파일서버로 구정된다.

응답데이타/메타데이타의 공통적 처리흐름은 다음과 같다.

1. 클라이언트가 표준 메지지 포맷으로 소켓서버에 메시지를 전송한다.
2. 소켓서버는 큐서버로 받은 메시지를 처리없이 큐서버의 답지처리 큐로 메시지를 발행한다.
3. 답지관리기는 큐서버로 부터 답지처리 큐를 구독하고 있다가 메시지가 도착하면 레디스에 저장한다.
4. 처리결과를 큐서버의 소켓서버 큐로 메시지를 발행한다.
5. 소켓서버는 큐서버의 소켓서버 큐를 구독하고 있다가 메시지가 도착하면 클라이언트에게 처리결과가 저장된 메시지를 전송한다.

위의 내용을 참조하여 레디스에 수험자별 문항풀이 데이타 저장 구조를 정의하고, 시나리오별 데이타 처리 흐름을 정의하시오.
